SILO B
turner
titian

www.avios.com/?Silo=TypeC


http://turner:4700/console
username - system
Password - c1ands3y

Weblogic Admin : cs-admin
Port           : 4700

ManagedServer1 : turner_cs1
Port           : 4701

ManagedServer2 : titian_cs1
Port           : 4701

Cluster        : AVCSCluster

Domain HOME - /opt/bea/user_projects/domains/avios-cs

Machine Names
=============
Type - Unix Machines
1)turner
Servers - csadmin,turner_cs1
2)titian
Servers - titian_cs1

JAVA_HOME - /opt/jdk/jdk170_101

cs-admin Log path - 
Log file name              :  /opt/bea/user_projects/domains/avios-cs/logs/server.log
Log file rotation directory: /opt/bea/user_projects/domains/avios-cs/logs-archive

turner_cs1 & titian_cs1 Log Path - 
Log file name              : /opt/bea/user_projects/domains/avios-cs/logs1/server.log
Log file rotation directory: /opt/bea/user_projects/domains/avios-cs/logs1-archive



DataSources:

Database - Attempting to contact (DESCRIPTION= (ADDRESS=(PROTOCOL=TCP)(HOST=bazille)(PORT=1521)) (CONNECT_DATA= (SERVICE_NAME=CSCP)))
Schema Login - cs_owner/p4bl1SH3rC

Path - /opt/bea/user_projects/domains/avios-cs




Error occured when select the JAVA_VENDOR as Oracle.Hence changed to Sun.

Also delete the BEA_JAVA_HOME property and add the jdkhome to SUN_JAVA_HOME as below


BEA_JAVA_HOME=""
export BEA_JAVA_HOME

SUN_JAVA_HOME="/opt/jdk/jdk170_101"
export SUN_JAVA_HOME

if [ "${JAVA_VENDOR}" = "Oracle" ] ; then
        JAVA_HOME="${BEA_JAVA_HOME}"
        export JAVA_HOME
else
        if [ "${JAVA_VENDOR}" = "Sun" ] ; then
                JAVA_HOME="${SUN_JAVA_HOME}"
                export JAVA_HOME
        else
                JAVA_VENDOR="Sun"
                export JAVA_VENDOR
                JAVA_HOME="/opt/jdk/jdk170_101"
                export JAVA_HOME
        fi
		

==================================================
WCS BASELINE INSTALLATION
=========================

ansible-playbook -k -i hosts manifesto_wcs.yml --vault-password-file vault_pass.txt --step -vvvv --ask-become-pass


WCS_PATCH Installation 
=====

ansible-playbook -k -i hosts manifesto_patch.yml --vault-password-file vault_pass.txt --step -vvvv --ask-become-pass

WCS_EHCACHE Installation
=======================

ansible-playbook -k -i hosts manifesto_ehcache.yml --vault-password-file vault_pass.txt --step -vvvv --ask-become-pass

=====================================================


Check the multicastaddress for all the *cache.xml files and configure a unique address per each server.

was 230.0.0.0 - changed to 235.0.0.0

p466691@turner>grep multicastGroupAddress *
cas-cache.xml:            properties="peerDiscovery=automatic, multicastGroupAddress=235.0.0.0,
cs-cache.xml:            properties="peerDiscovery=automatic, multicastGroupAddress=235.0.0.0,
linked-cache.xml:            properties="peerDiscovery=automatic, multicastGroupAddress=235.0.0.0,
ss-cache.xml:            properties="peerDiscovery=automatic, multicastGroupAddress=235.0.0.0,
/opt/bea/user_projects/domains/avios-cs/applications/cs/WEB-INF/classes


========================================================================================================

1. 1. Take a backup of jbossTicketCacheReplicationConfig.xml file in the bin folder 

2. Open the above file for edit and find the following line.

    <attribute name="ClusterName">TreeCache-Cluster</attribute>
3. Change the above line as below

    <attribute name="ClusterName">TreeCache-Cluster-Node1</attribute>

4. Save the file and restart the server after removing the contents of java.io.tempdir. 

5. Retest and notice the issue no longer exists.

===========================================================================================================

Now Deploying Manifesto Release for Avios - webapp , proxy etc

Last Release by Manifesto - Release R
		
ansible-playbook -k -i hosts --extra-vars "variable_host=turner" manifesto_deployment.yml --vault-password-file vault_pass.txt --step -vvvv --skip-tags "data" --ask-become-pass		
		
		
sudowl java -classpath /opt/bea/user_projects/domains/avios-cs/applications/cs/WEB-INF/lib/*:/opt/bea/user_projects/domains/avios-cs/applications/cs/WEB-INF/classes/:/opt/wcs11/bin COM.FutureTense.Apps.CatalogMover -b http://turner:4701/cs/CatalogManager -u fwadmin -p xceladmin -x import -f /var/tmp/manifesto/ElementCatalog/ElementCatalog.html

p466691@turner>sudowl java -classpath /opt/bea/user_projects/domains/avios-cs/applications/cs/WEB-INF/lib/*:/opt/bea/user_projects/domains/avios-cs/applications/cs/WEB-INF/classes/:/opt/wcs11/bin COM.FutureTense.Apps.CatalogMover -b http://turner:4701/cs/CatalogManager -u fwadmin -p xceladmin -x import -f /var/tmp/manifesto/ElementCatalog/ElementCatalog.html
Oracle WebCenter Sites 11gR1 11.1.1.8.0
Copyright (c) 2011,2013, Oracle and/or its affiliates. All Rights Reserved.

CatalogMover 11.1.1.8.0  Build Date: May 06 2016 at 05:30:42 Build Number: 276 Revision:182627

No Connections
Attempting to load ESAPI.properties via file I/O.
Attempting to load ESAPI.properties as resource file via file I/O.
Not found in 'org.owasp.esapi.resources' directory or file not readable: /var/tmp/manifesto/ElementCatalog/ESAPI.properties
Not found in SystemResource Directory/resourceDirectory: .esapi/ESAPI.properties
Not found in 'user.home' (/export/home/weblogic) directory: /export/home/weblogic/esapi/ESAPI.properties
Loading ESAPI.properties via file I/O failed. Exception was: java.io.FileNotFoundException
Attempting to load ESAPI.properties via the classpath.
SUCCESSFULLY LOADED ESAPI.properties via the CLASSPATH from '/ (root)' using current thread context class loader!
Attempting to load validation.properties via file I/O.
Attempting to load validation.properties as resource file via file I/O.
Not found in 'org.owasp.esapi.resources' directory or file not readable: /var/tmp/manifesto/ElementCatalog/validation.properties
Not found in SystemResource Directory/resourceDirectory: .esapi/validation.properties
Not found in 'user.home' (/export/home/weblogic) directory: /export/home/weblogic/esapi/validation.properties
Loading validation.properties via file I/O failed.
Attempting to load validation.properties via the classpath.
SUCCESSFULLY LOADED validation.properties via the CLASSPATH from '/ (root)' using current thread context class loader!
Connected to localhost
Loaded Catalog List from localhost
Pushing 10 rows per post
Post Results Created temporary table tt1502364437342
Added row: elementname = CustomElements/OpenMarket/Xcelerate/Util/GetUrlExpressions

Committed changes to catalog ElementCatalog
Deleted temporary table tt1502364437342

Successfully imported /var/tmp/manifesto/ElementCatalog/ElementCatalog.html
CatalogMover exited.
Disconnected from localhost.
10.08.2017 14:55:27 *WARN * ehcache: Running Shutdown hook for Cache Thread-4 (EhCacheObjectCache.java, line 577)
10.08.2017 14:55:27 *WARN * ehcache: Completed running Shutdown hook for Cache Thread-4 (EhCacheObjectCache.java, line 579)
/var/tmp/manifesto/ElementCatalog

=====================================================================================================================================================================================================================================

Support tools installation completed.

SearchFilght issue - rest-template-connection-configurations.xml copied from rousseau to SILOC.

path - /opt/bea/user_projects/domains/avios-cs/applications/cs/WEB-INF/classes	




Issues After during sanity checks
=================================
Issue 1 :

All the market homepages except /fr/fr were working as expected.
The locale on /fr/fr market was missing and hence it resulted in page-not-found error.
To fix this - we have done a re-save of fr-fr-homepage on Preprod and published only this page to (to SiloC) restore the locales.

Issue 2:

The sigin page was throwing page not found error when tried to access it from the home page.
All the market locales were properly updated for the sign in page.
The issue has been identified with the My-Avios page as the locales for this were configured for only 3 markets.
We have re-saved the my-avios page on preprod ( only for the missing markets on SiloC) and published the same to turner.
This fixed the issue.

